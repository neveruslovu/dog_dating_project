{% extends "dogs/base.html" %}
{% load static %}
{% load dogs_tags %}

{% block title %}{{ page_title }} - DogDating{% endblock %}

{% block content %}
<div class="page-header">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h1 class="page-title">{{ page_title }}</h1>
            <p class="page-subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏ —Å–æ–±–∞–∫ –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞–º–∏</p>
        </div>
    </div>
</div>

<div class="dashboard-grid" style="display: grid; grid-template-columns: 1fr 300px; gap: 2rem; margin-bottom: 2rem;">
    <style>
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr !important;
            }
        }
    </style>

    <!-- Main Content -->
    <div>

        <!-- User's Dogs Section -->
        <div class="card mb-3">
            <div class="card-header">
                <h3 class="card-title" style="margin: 0;">
                    <i class="bi bi-heart"></i> –ú–æ–∏ —Å–æ–±–∞–∫–∏
                </h3>
            </div>
            <div class="card-body">
                {% if user_dogs %}
                    <div class="dogs-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                        {% for dog in user_dogs %}
                        <div class="dog-card" style="border: 1px solid rgba(59,130,246,0.15); border-radius: 12px; overflow: hidden; background: rgba(51,65,85,0.6);">
                            <div class="dog-image" style="height: 150px; background: linear-gradient(45deg, rgba(59,130,246,0.2), rgba(37,99,235,0.1)); display: flex; align-items: center; justify-content: center; position: relative;">
                                {% if dog.photo %}
                                    <img src="{{ dog.photo.url }}" alt="{{ dog.name }}" style="max-width: 100%; max-height: 100%; object-fit: cover;">
                                {% else %}
                                    <div class="dog-placeholder" style="font-size: 3rem; color: #ccc;">üêï</div>
                                {% endif %}
                            </div>
                            <div class="dog-info" style="padding: 15px;">
                                <div class="dog-name" style="font-weight: 600; color: #93c5fd; margin-bottom: 5px;">{{ dog.name }}</div>
                                <div class="dog-details" style="color: #cbd5e1; font-size: 0.9rem; margin-bottom: 10px;">
                                    {% if dog.gender == "M" %}‚ôÇ {% else %}‚ôÄ {% endif %}{{ dog.breed }}, {{ dog.age }} {{ dog.age|get_years_string }}
                                </div>
                                <div class="d-flex gap-2">
                                    <a href="{% url 'dogs:dog_detail' dog.pk %}" class="btn btn-secondary" style="flex: 1; font-size: 0.9rem;">
                                        <i class="bi bi-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä
                                    </a>
                                    <a href="{% url 'dogs:dog_update' dog.pk %}" class="btn btn-primary" style="flex: 1; font-size: 0.9rem;">
                                        <i class="bi bi-pencil"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                                    </a>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="text-center" style="padding: 3rem;">
                        <div style="font-size: 3rem; color: rgba(93,184,255,0.3); margin-bottom: 1rem;">üêï</div>
                        <h3 style="color: #93c5fd; margin-bottom: 1rem;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–±–∞–∫</h3>
                        <p style="color: #cbd5e1; margin-bottom: 2rem;">–ù–∞—á–Ω–∏—Ç–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞, –¥–æ–±–∞–≤–∏–≤ –ø—Ä–æ—Ñ–∏–ª—å —Å–≤–æ–µ–π —Å–æ–±–∞–∫–∏</p>
                        <a href="{% url 'dogs:dog_create' %}" class="btn btn-primary">
                            <i class="bi bi-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é —Å–æ–±–∞–∫—É
                        </a>
                    </div>
                {% endif %}
            </div>
        </div>

    </div>

    <!-- Sidebar -->
    <div>

        <!-- Profile Section -->
        <div class="card mb-3">
            <div class="card-header">
                <h4 class="card-title" style="margin: 0;">
                    <i class="bi bi-person"></i> –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                </h4>
            </div>
            <div class="card-body">
                <div class="text-center">
                    <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(45deg, #3b82f6, #2563eb); display: inline-flex; align-items: center; justify-content: center; color: white; font-size: 2rem; margin-bottom: 1rem;">
                        {{ request.user.username|first|upper }}
                    </div>
                    <h5 style="margin: 0.5rem 0; color: #93c5fd;">{{ request.user.username }}</h5>
                    <p style="color: #cbd5e1; font-size: 0.9rem; margin: 0 0 1rem 0;">{{ request.user.email }}</p>

                    <div class="d-flex gap-2" style="flex-direction: column;">
                        <a href="{% url 'dogs:profile' %}" class="btn btn-secondary" style="width: 100%; font-size: 0.9rem;">
                            <i class="bi bi-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è
                        </a>
                        <a href="{% url 'dogs:profile_edit' %}" class="btn btn-primary" style="width: 100%; font-size: 0.9rem;">
                            <i class="bi bi-pencil"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Section -->
        <div class="card mb-3">
            <div class="card-header">
                <h4 class="card-title" style="margin: 0;">
                    <i class="bi bi-bar-chart"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                </h4>
            </div>
            <div class="card-body">
                <div class="stats-mini" style="space-y: 1rem;">
                    <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">–ú–æ–∏ —Å–æ–±–∞–∫–∏</div>
                            <div style="font-weight: 600; color: #93c5fd; font-size: 1.2rem;">{{ user_dogs.count }}</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                            üêï
                        </div>
                    </div>

                    <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">–ú—ç—Ç—á–∏</div>
                            <div style="font-weight: 600; color: #93c5fd; font-size: 1.2rem;">{{ total_matches }}</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #ec4899, #db2777); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                            üíï
                        </div>
                    </div>

                    <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</div>
                            <div style="font-weight: 600; color: #93c5fd; font-size: 1.2rem;">{{ total_favorites }}</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                            ‚ù§Ô∏è
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
            <div class="card-header">
                <h4 class="card-title" style="margin: 0;">
                    <i class="bi bi-lightning"></i> –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
                </h4>
            </div>
            <div class="card-body">
                <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                    <a href="{% url 'dogs:dog_list' %}" class="btn btn-secondary" style="width: 100%; text-align: left;">
                        <i class="bi bi-search"></i> –ò—Å–∫–∞—Ç—å —Å–æ–±–∞–∫
                    </a>
                    <a href="{% url 'dogs:matches_list' %}" class="btn btn-success" style="width: 100%; text-align: left;">
                        <i class="bi bi-heart"></i> –ú–æ–∏ –º—ç—Ç—á–∏
                    </a>
                    <a href="{% url 'dogs:favorites_list' %}" class="btn btn-warning" style="width: 100%; text-align: left;">
                        <i class="bi bi-star"></i> –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
                    </a>
                </div>
            </div>
        </div>

    </div>

</div>



{% endblock %}
