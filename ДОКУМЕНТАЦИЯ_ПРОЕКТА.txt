================================================================================
                    ĞŸĞĞ›ĞĞĞ¯ Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢ĞĞ¦Ğ˜Ğ¯ ĞŸĞ ĞĞ•ĞšĞ¢Ğ DOGDATING
================================================================================

ĞĞ“Ğ›ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•:
1. Ğ’Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ¾Ğ±Ğ·Ğ¾Ñ€ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
2. ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¸ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
3. Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº (Settings)
4. ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Models)
5. Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (Services)
6. ĞŸÑ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ (Views)
7. Ğ¤Ğ¾Ñ€Ğ¼Ñ‹ Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
8. Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ¸ UI
9. Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¼ĞµĞ½Ñ
10. Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
11. Ğ Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Docker
12. Ğ Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹

================================================================================
1. Ğ’Ğ’Ğ•Ğ”Ğ•ĞĞ˜Ğ• Ğ˜ ĞĞ‘Ğ—ĞĞ  ĞŸĞ ĞĞ•ĞšĞ¢Ğ
================================================================================

DogDating - ÑÑ‚Ğ¾ Ğ²ĞµĞ±-Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ½Ğ° Django Ğ´Ğ»Ñ Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ²Ğ° ÑĞ¾Ğ±Ğ°Ğº.

ĞĞ¡ĞĞĞ’ĞĞ«Ğ• Ğ’ĞĞ—ĞœĞĞ–ĞĞĞ¡Ğ¢Ğ˜:
- Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑĞ¼Ğ¸
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ĞµĞ¹ ÑĞ¾Ğ±Ğ°Ğº (Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑĞ¾Ğ±Ğ°Ğº Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ)
- ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¸ Ğ¿Ğ¾Ğ¸ÑĞº Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… ÑĞ¾Ğ±Ğ°Ğº
- Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¼Ğ°Ñ‚Ñ‡ĞµĞ¹ (Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ½Ğ° Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ²Ğ¾)
- Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ (ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ½Ñ€Ğ°Ğ²Ğ¸Ğ²ÑˆĞ¸Ñ…ÑÑ ÑĞ¾Ğ±Ğ°Ğº)
- ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²
- Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ

Ğ¢Ğ•Ğ¥ĞĞĞ›ĞĞ“Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™ Ğ¡Ğ¢Ğ•Ğš:
- Django 4.2+
- Python 3.8+
- SQLite (Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°) / PostgreSQL (Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½)
- WhiteNoise (ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹)
- Docker + Docker Compose
- Gunicorn (WSGI-ÑĞµÑ€Ğ²ĞµÑ€)
- Bootstrap (CSS Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€Ğº)

Ğ¯Ğ—Ğ«Ğš Ğ˜ĞĞ¢Ğ•Ğ Ğ¤Ğ•Ğ™Ğ¡Ğ: Ğ ÑƒÑÑĞºĞ¸Ğ¹ (LANGUAGE_CODE='ru-ru')

================================================================================
2. ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ˜ Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ
================================================================================

Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ ĞŸĞ ĞĞ•ĞšĞ¢Ğ:

dog_dating_project/
â”œâ”€â”€ manage.py                    # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Django
â”œâ”€â”€ requirements.txt             # Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Python
â”œâ”€â”€ .env.example                 # ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
â”œâ”€â”€ .env                         # Ğ ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ (Ğ½Ğµ Ğ² git)
â”œâ”€â”€ Dockerfile                   # Docker Ğ¾Ğ±Ñ€Ğ°Ğ·
â”œâ”€â”€ docker-compose.yml           # Docker Compose ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚
â”œâ”€â”€ project/                     # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¿Ğ°ĞºĞµÑ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ urls.py                  # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ URL Ñ€Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³
â”‚   â”œâ”€â”€ wsgi.py                  # WSGI Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°
â”‚   â”œâ”€â”€ asgi.py                  # ASGI Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°
â”‚   â””â”€â”€ settings/                # ĞŸĞ°ĞºĞµÑ‚ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº
â”‚       â”œâ”€â”€ __init__.py          # Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ development Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ
â”‚       â”œâ”€â”€ base.py              # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
â”‚       â”œâ”€â”€ development.py       # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
â”‚       â””â”€â”€ production.py        # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½Ğ°
â”‚
â”œâ”€â”€ dogs/                        # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
â”‚   â”œâ”€â”€ models.py                # ĞœĞ¾Ğ´ĞµĞ»Ğ¸: Dog, Match, Favorite, UserProfile
â”‚   â”œâ”€â”€ views.py                 # ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
â”‚   â”œâ”€â”€ views_new.py             # Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
â”‚   â”œâ”€â”€ forms.py                 # Ğ¤Ğ¾Ñ€Ğ¼Ñ‹
â”‚   â”œâ”€â”€ urls.py                  # URL Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
â”‚   â”œâ”€â”€ admin.py                 # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞ¸
â”‚   â”œâ”€â”€ utils.py                 # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
â”‚   â”œâ”€â”€ management/commands/     # ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
â”‚   â”‚   â””â”€â”€ populate_data.py     # Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
â”‚   â”œâ”€â”€ templatetags/            # ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğµ Ñ‚ĞµĞ³Ğ¸ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ²
â”‚   â”‚   â””â”€â”€ dogs_tags.py
â”‚   â””â”€â”€ templates/dogs/          # Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ñ‹
â”‚       â”œâ”€â”€ base.html            # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½
â”‚       â”œâ”€â”€ landing.html         # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
â”‚       â”œâ”€â”€ dashboard.html       # ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
â”‚       â”œâ”€â”€ dog_list.html        # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑĞ¾Ğ±Ğ°Ğº
â”‚       â”œâ”€â”€ dog_detail.html      # Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ÑĞ¾Ğ±Ğ°ĞºĞ¸
â”‚       â”œâ”€â”€ dog_form.html        # Ğ¤Ğ¾Ñ€Ğ¼Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ/Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
â”‚       â”œâ”€â”€ matches.html         # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¼Ğ°Ñ‚Ñ‡ĞµĞ¹
â”‚       â”œâ”€â”€ favorites.html       # Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ
â”‚       â””â”€â”€ components/          # ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
â”‚           â”œâ”€â”€ guest_menu.html  # ĞœĞµĞ½Ñ Ğ´Ğ»Ñ Ğ³Ğ¾ÑÑ‚ĞµĞ¹
â”‚           â””â”€â”€ messages.html    # Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
â”‚
â”œâ”€â”€ menu_app/                    # ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¼ĞµĞ½Ñ
â”‚   â”œâ”€â”€ models.py                # Menu, MenuItem
â”‚   â”œâ”€â”€ admin.py                 # ĞĞ´Ğ¼Ğ¸Ğ½ĞºĞ° Ğ¼ĞµĞ½Ñ
â”‚   â”œâ”€â”€ templatetags/            # Ğ¢ĞµĞ³Ğ¸ Ğ´Ğ»Ñ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³Ğ° Ğ¼ĞµĞ½Ñ
â”‚   â”‚   â””â”€â”€ menu_tags.py
â”‚   â””â”€â”€ management/commands/
â”‚       â””â”€â”€ setup_menus.py       # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¼ĞµĞ½Ñ
â”‚
â”œâ”€â”€ services/                    # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (Service Layer)
â”‚   â”œâ”€â”€ dog_service.py           # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ ÑĞ¾Ğ±Ğ°ĞºĞ°Ğ¼Ğ¸
â”‚   â”œâ”€â”€ favorites_service.py     # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾
â”‚   â””â”€â”€ match_service.py         # Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¼Ğ°Ñ‚Ñ‡ĞµĞ¹
â”‚
â”œâ”€â”€ tests/                       # Ğ¢ĞµÑÑ‚Ñ‹
â”‚   â”œâ”€â”€ test_db.py               # Ğ¢ĞµÑÑ‚Ñ‹ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”œâ”€â”€ test_models.py           # Ğ¢ĞµÑÑ‚Ñ‹ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
â”‚   â”œâ”€â”€ test_views.py            # Ğ¢ĞµÑÑ‚Ñ‹ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
â”‚   â””â”€â”€ test_validations_and_services.py  # Ğ¢ĞµÑÑ‚Ñ‹ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
â”‚
â”œâ”€â”€ media/                       # Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹
â”‚   â”œâ”€â”€ dogs/                    # Ğ¤Ğ¾Ñ‚Ğ¾ ÑĞ¾Ğ±Ğ°Ğº
â”‚   â””â”€â”€ avatars/                 # ĞĞ²Ğ°Ñ‚Ğ°Ñ€Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
â”‚
â””â”€â”€ staticfiles/                 # Ğ¡Ğ¾Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğµ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ (collectstatic)

ĞŸĞ Ğ˜ĞĞ¦Ğ˜ĞŸĞ« ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ«:

1. Ğ ĞĞ—Ğ”Ğ•Ğ›Ğ•ĞĞ˜Ğ• ĞĞ¢Ğ’Ğ•Ğ¢Ğ¡Ğ¢Ğ’Ğ•ĞĞĞĞ¡Ğ¢Ğ˜:
   - models.py: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ Ğ¸Ñ… Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹
   - views.py: Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° HTTP Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²
   - services/: Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¸ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
   - forms.py: Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ³Ğ¾ Ğ²Ğ²Ğ¾Ğ´Ğ°

2. ĞœĞĞĞ“ĞĞ£Ğ ĞĞ’ĞĞ•Ğ’Ğ«Ğ• ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜:
   - base.py: Ğ¾Ğ±Ñ‰Ğ¸Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğ¹
   - development.py: DEBUG=True, SQLite
   - production.py: DEBUG=False, PostgreSQL, Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

3. ĞŸĞ•Ğ Ğ•Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—Ğ£Ğ•ĞœĞ«Ğ• ĞšĞĞœĞŸĞĞĞ•ĞĞ¢Ğ«:
   - Template tags Ğ´Ğ»Ñ Ğ¼ĞµĞ½Ñ Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
   - ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ² (header, footer, messages)
   - Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ´Ğ»Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸

================================================================================
3. Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ ĞĞĞ¡Ğ¢Ğ ĞĞ•Ğš (SETTINGS)
================================================================================

ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ ĞĞĞ¡Ğ¢Ğ ĞĞ•Ğš:

Ğ’Ğ¼ĞµÑÑ‚Ğ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ° settings.py Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ¿Ğ°ĞºĞµÑ‚ project/settings/:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ project/settings/__init__.py                                    â”‚
â”‚ â†“                                                               â”‚
â”‚ from .development import *  # ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ project/settings/base.py - Ğ‘ĞĞ—ĞĞ’Ğ«Ğ• ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· django-environ              â”‚
â”‚ â€¢ INSTALLED_APPS (django apps + dogs + menu_app)                â”‚
â”‚ â€¢ MIDDLEWARE (Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ WhiteNoise)                               â”‚
â”‚ â€¢ TEMPLATES ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ                                        â”‚
â”‚ â€¢ DATABASE_URL Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° (SQLite Ğ¸Ğ»Ğ¸ PostgreSQL)                â”‚
â”‚ â€¢ STATIC_ROOT, MEDIA_ROOT                                       â”‚
â”‚ â€¢ Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ project/settings/development.py - Ğ ĞĞ—Ğ ĞĞ‘ĞĞ¢ĞšĞ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ from .base import *                                             â”‚
â”‚                                                                 â”‚
â”‚ DEBUG = True                                                    â”‚
â”‚ ALLOWED_HOSTS = ['localhost', '127.0.0.1']                      â”‚
â”‚ DATABASES = SQLite Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ project/settings/production.py - ĞŸĞ ĞĞ”ĞĞšĞ¨Ğ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ from .base import *                                             â”‚
â”‚                                                                 â”‚
â”‚ DEBUG = False                                                   â”‚
â”‚ SESSION_COOKIE_SECURE = True                                    â”‚
â”‚ CSRF_COOKIE_SECURE = True                                       â”‚
â”‚ SECURE_SSL_REDIRECT = True                                      â”‚
â”‚ SECURE_HSTS_SECONDS = 31536000                                  â”‚
â”‚ DATABASES = PostgreSQL Ñ‡ĞµÑ€ĞµĞ· DATABASE_URL                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞŸĞ•Ğ Ğ•ĞœĞ•ĞĞĞ«Ğ• ĞĞšĞ Ğ£Ğ–Ğ•ĞĞ˜Ğ¯ (.env Ñ„Ğ°Ğ¹Ğ»):

# ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
SECRET_KEY=your-secret-key-here-change-in-production
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
# Ğ”Ğ»Ñ SQLite (Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°):
DATABASE_URL=sqlite:///db.sqlite3

# Ğ”Ğ»Ñ PostgreSQL (Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½):
# DATABASE_URL=postgres://user:password@host:5432/dbname

# Email Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=noreply@dogdating.com

# Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ (Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½Ğ°)
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_HSTS_SECONDS=31536000
SECURE_SSL_REDIRECT=True
CSRF_TRUSTED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

Ğ’Ğ«Ğ‘ĞĞ  ĞĞĞ¡Ğ¢Ğ ĞĞ•Ğš:

ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ (manage.py, wsgi.py, asgi.py):
    DJANGO_SETTINGS_MODULE = 'project.settings.development'

Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½Ğ° (Ğ² docker-compose.yml Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ):
    DJANGO_SETTINGS_MODULE = 'project.settings.production'

Ğ¡Ğ¢ĞĞ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ• Ğ¤ĞĞ™Ğ›Ğ« (WhiteNoise):

WhiteNoise Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Django ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ Ñ€Ğ°Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ±ĞµĞ· Nginx:

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'whitenoise.middleware.WhiteNoiseMiddleware',  # Ğ¡Ñ€Ğ°Ğ·Ñƒ Ğ¿Ğ¾ÑĞ»Ğµ Security
    ...
]

STATIC_URL = '/static/'
STATIC_ROOT = BASE_DIR / 'staticfiles'
STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'

ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ´Ğ»Ñ ÑĞ±Ğ¾Ñ€ĞºĞ¸ ÑÑ‚Ğ°Ñ‚Ğ¸ĞºĞ¸:
    python manage.py collectstatic --noinput

ĞœĞ•Ğ”Ğ˜Ğ Ğ¤ĞĞ™Ğ›Ğ«:

MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'

Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°:
    media/dogs/      - Ñ„Ğ¾Ñ‚Ğ¾ ÑĞ¾Ğ±Ğ°Ğº
    media/avatars/   - Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹

================================================================================
4. ĞœĞĞ”Ğ•Ğ›Ğ˜ Ğ”ĞĞĞĞ«Ğ¥ (MODELS)
================================================================================

ĞœĞĞ”Ğ•Ğ›Ğ¬: Dog (ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ ÑĞ¾Ğ±Ğ°ĞºĞ¸)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ğ¤Ğ°Ğ¹Ğ»: dogs/models.py

class Dog(models.Model):
    # Ğ¡Ğ²ÑĞ·Ğ¸
    owner = ForeignKey(User, on_delete=CASCADE, related_name='dogs')
    
    # ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ
    name = CharField(max_length=100)
    breed = CharField(max_length=100)
    age = IntegerField(validators=[MinValueValidator(0), MaxValueValidator(20)])
    gender = CharField(max_length=1, choices=[('M', 'ĞšĞ¾Ğ±ĞµĞ»ÑŒ'), ('F', 'Ğ¡ÑƒĞºĞ°')])
    size = CharField(max_length=10, choices=[
        ('small', 'ĞœĞ°Ğ»ĞµĞ½ÑŒĞºĞ°Ñ'),
        ('medium', 'Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ'),
        ('large', 'Ğ‘Ğ¾Ğ»ÑŒÑˆĞ°Ñ')
    ])
    temperament = CharField(max_length=200)
    description = TextField()
    photo = ImageField(upload_to='dogs/', blank=True, null=True)
    
    # Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚ĞºĞ¸
    created_at = DateTimeField(auto_now_add=True)
    updated_at = DateTimeField(auto_now=True)
    
    class Meta:
        # Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ: Ğ¾Ğ´Ğ¸Ğ½ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ĞµÑ† Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ²ÑƒÑ… ÑĞ¾Ğ±Ğ°Ğº Ñ Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ğ¼ Ğ¸Ğ¼ĞµĞ½ĞµĞ¼
        constraints = [
            UniqueConstraint(fields=['owner', 'name'], name='unique_dog_name_per_owner')
        ]
        ordering = ['-created_at']
    
    def __str__(self):
        return f"{self.name} ({self.owner.username})"

ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ«Ğ• ĞĞ¡ĞĞ‘Ğ•ĞĞĞĞ¡Ğ¢Ğ˜:
â€¢ owner - ÑĞ²ÑĞ·ÑŒ Ñ User (Ğ¾Ğ´Ğ¸Ğ½ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ - Ğ¼Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ±Ğ°Ğº)
â€¢ age - Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ 0-20 Ğ»ĞµÑ‚ Ğ½Ğ° ÑƒÑ€Ğ¾Ğ²Ğ½Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â€¢ photo - Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ² media/dogs/
â€¢ Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ° (owner, name)
â€¢ __str__ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ "Ğ˜Ğ¼Ñ (Ğ²Ğ»Ğ°Ğ´ĞµĞ»ĞµÑ†)" Ğ´Ğ»Ñ ÑƒĞ´Ğ¾Ğ±ÑÑ‚Ğ²Ğ° Ğ² Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞµ

Ğ¡Ğ’Ğ¯Ğ—ĞĞĞĞ«Ğ• Ğ—ĞĞŸĞ ĞĞ¡Ğ«:
    user.dogs.all()                    # Ğ’ÑĞµ ÑĞ¾Ğ±Ğ°ĞºĞ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    Dog.objects.filter(owner=user)     # Ğ¢Ğ¾ Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ
    Dog.objects.select_related('owner') # ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞœĞĞ”Ğ•Ğ›Ğ¬: Match (Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ²Ğ¾)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

class Match(models.Model):
    # Ğ¡Ğ²ÑĞ·Ğ¸
    dog_from = ForeignKey(Dog, on_delete=CASCADE, related_name='matches_sent')
    dog_to = ForeignKey(Dog, on_delete=CASCADE, related_name='matches_received')
    
    # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
    status = CharField(max_length=10, choices=[
        ('pending', 'ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚'),
        ('accepted', 'ĞŸÑ€Ğ¸Ğ½ÑÑ‚'),
        ('declined', 'ĞÑ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½')
    ], default='pending')
    
    # Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚ĞºĞ¸
    created_at = DateTimeField(auto_now_add=True)
    updated_at = DateTimeField(auto_now=True)
    
    class Meta:
        constraints = [
            UniqueConstraint(fields=['dog_from', 'dog_to'], name='unique_match')
        ]
        indexes = [
            Index(fields=['dog_from', 'status']),
            Index(fields=['dog_to', 'status']),
        ]
    
    def __str__(self):
        return f"{self.dog_from.name} ({self.dog_from.owner.username}) -> " \
               f"{self.dog_to.name} ({self.dog_to.owner.username})"

ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ«Ğ• ĞĞ¡ĞĞ‘Ğ•ĞĞĞĞ¡Ğ¢Ğ˜:
â€¢ dog_from - ĞºÑ‚Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
â€¢ dog_to - ĞºĞ¾Ğ¼Ñƒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
â€¢ status - ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ (pending/accepted/declined)
â€¢ Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ°Ñ€Ñ‹ (dog_from, dog_to) - Ğ½ĞµĞ»ÑŒĞ·Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ²Ğ°Ğ¶Ğ´Ñ‹
â€¢ Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ

Ğ–Ğ˜Ğ—ĞĞ•ĞĞĞ«Ğ™ Ğ¦Ğ˜ĞšĞ› ĞœĞĞ¢Ğ§Ğ:
1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ: status='pending'
2. Ğ’Ğ»Ğ°Ğ´ĞµĞ»ĞµÑ† dog_to Ğ¼Ğ¾Ğ¶ĞµÑ‚:
   - ĞŸÑ€Ğ¸Ğ½ÑÑ‚ÑŒ: status='accepted'
   - ĞÑ‚ĞºĞ»Ğ¾Ğ½Ğ¸Ñ‚ÑŒ: status='declined'

Ğ¡Ğ’Ğ¯Ğ—ĞĞĞĞ«Ğ• Ğ—ĞĞŸĞ ĞĞ¡Ğ«:
    dog.matches_sent.all()              # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
    dog.matches_received.all()          # ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
    Match.objects.filter(status='pending')  # ĞĞ¶Ğ¸Ğ´Ğ°ÑÑ‰Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞœĞĞ”Ğ•Ğ›Ğ¬: Favorite (Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

class Favorite(models.Model):
    # Ğ¡Ğ²ÑĞ·Ğ¸
    user = ForeignKey(User, on_delete=CASCADE, related_name='favorite_dogs')
    dog = ForeignKey(Dog, on_delete=CASCADE, related_name='favorited_by')
    
    # Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¼ĞµÑ‚ĞºĞ°
    created_at = DateTimeField(auto_now_add=True)
    
    class Meta:
        constraints = [
            UniqueConstraint(fields=['user', 'dog'], name='unique_favorite')
        ]
        indexes = [
            Index(fields=['user']),
            Index(fields=['dog']),
            Index(fields=['user', 'dog']),
        ]
    
    def __str__(self):
        return f"{self.user.username} -> {self.dog.name}"

ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ«Ğ• ĞĞ¡ĞĞ‘Ğ•ĞĞĞĞ¡Ğ¢Ğ˜:
â€¢ Ğ¡Ğ²ÑĞ·ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ-ÑĞ¾Ğ±Ğ°ĞºĞ°
â€¢ Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ°Ñ€Ñ‹ (user, dog) - Ğ½ĞµĞ»ÑŒĞ·Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ²Ğ°Ğ¶Ğ´Ñ‹
â€¢ Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ°

Ğ¡Ğ’Ğ¯Ğ—ĞĞĞĞ«Ğ• Ğ—ĞĞŸĞ ĞĞ¡Ğ«:
    user.favorite_dogs.all()            # Ğ’ÑĞµ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    dog.favorited_by.all()              # ĞšÑ‚Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ» ÑĞ¾Ğ±Ğ°ĞºÑƒ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ
    Favorite.objects.filter(user=user)  # Ğ¢Ğ¾ Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞœĞĞ”Ğ•Ğ›Ğ¬: UserProfile (Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

class UserProfile(models.Model):
    # Ğ¡Ğ²ÑĞ·ÑŒ Ğ¾Ğ´Ğ¸Ğ½-Ğº-Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ Ñ User
    user = OneToOneField(User, on_delete=CASCADE)
    
    # Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ
    bio = TextField(blank=True)
    location = CharField(max_length=100, blank=True)
    avatar = ImageField(upload_to='avatars/', blank=True, null=True)
    
    # Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¼ĞµÑ‚ĞºĞ°
    created_at = DateTimeField(auto_now_add=True)
    
    def __str__(self):
        return self.user.username

ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ«Ğ• ĞĞ¡ĞĞ‘Ğ•ĞĞĞĞ¡Ğ¢Ğ˜:
â€¢ OneToOneField Ñ User - Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¾Ğ¹ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â€¢ Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ñ€Ğ¸ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
â€¢ avatar Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ Ğ² media/avatars/

Ğ”ĞĞ¡Ğ¢Ğ£ĞŸ:
    user.userprofile.bio                # Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ
    user.userprofile.avatar.url         # URL Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞœĞĞ”Ğ•Ğ›Ğ¬: Menu Ğ¸ MenuItem (Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¼ĞµĞ½Ñ)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

class Menu(models.Model):
    name = CharField(max_length=100, unique=True)
    slug = SlugField(unique=True)
    
    def __str__(self):
        return self.name

class MenuItem(models.Model):
    menu = ForeignKey(Menu, on_delete=CASCADE, related_name='items')
    title = CharField(max_length=100)
    url = CharField(max_length=200)
    order = IntegerField(default=0)
    parent = ForeignKey('self', null=True, blank=True, on_delete=CASCADE, 
                        related_name='children')
    
    class Meta:
        ordering = ['order']
    
    def __str__(self):
        return self.title

ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ«Ğ• ĞĞ¡ĞĞ‘Ğ•ĞĞĞĞ¡Ğ¢Ğ˜:
â€¢ Menu - ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ğ´Ğ»Ñ Ğ¿ÑƒĞ½ĞºÑ‚Ğ¾Ğ² Ğ¼ĞµĞ½Ñ
â€¢ MenuItem - Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ÑƒĞ½ĞºÑ‚ Ğ¼ĞµĞ½Ñ
â€¢ parent - Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ²Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ñ… Ğ¼ĞµĞ½Ñ
â€¢ order - Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ

Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ•:
    Menu.objects.get(slug='main-menu').items.all()  # Ğ’ÑĞµ Ğ¿ÑƒĞ½ĞºÑ‚Ñ‹ Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ


================================================================================
5. Ğ‘Ğ˜Ğ—ĞĞ•Ğ¡-Ğ›ĞĞ“Ğ˜ĞšĞ (SERVICES)
================================================================================

Ğ’ÑÑ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ²Ñ‹Ğ½ĞµÑĞµĞ½Ğ° Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ² Ğ¿Ğ°Ğ¿ĞºĞµ services/.

ĞŸĞ Ğ•Ğ˜ĞœĞ£Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ ĞŸĞĞ”Ğ¥ĞĞ”Ğ:
âœ“ ĞŸĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ°
âœ“ Ğ›ĞµĞ³ĞºĞ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
âœ“ Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸
âœ“ Ğ•Ğ´Ğ¸Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ´Ğ»Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ğ¡Ğ•Ğ Ğ’Ğ˜Ğ¡: dog_service.py - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ±Ğ°ĞºĞ°Ğ¼Ğ¸
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

def can_user_edit_dog(user, dog):
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ğ°ĞºĞ¸"""
    return dog.owner == user

def can_user_delete_dog(user, dog):
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ±Ğ°ĞºĞ¸"""
    return dog.owner == user

def get_user_dogs(user):
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµÑ… ÑĞ¾Ğ±Ğ°Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""
    return Dog.objects.filter(owner=user)

def is_dog_visible_to_user(dog, user):
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ ÑĞ¾Ğ±Ğ°ĞºĞ¸ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""
    return True  # Ğ’ÑĞµ ÑĞ¾Ğ±Ğ°ĞºĞ¸ Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ²ÑĞµĞ¼

Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ• Ğ’ VIEWS:

from services.dog_service import can_user_edit_dog

def edit_dog(request, pk):
    dog = get_object_or_404(Dog, pk=pk)
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ñ‡ĞµÑ€ĞµĞ· ÑĞµÑ€Ğ²Ğ¸Ñ
    if not can_user_edit_dog(request.user, dog):
        return HttpResponseForbidden("Ğ£ Ğ²Ğ°Ñ Ğ½ĞµÑ‚ Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ")
    
    # ... Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ğ¡Ğ•Ğ Ğ’Ğ˜Ğ¡: favorites_service.py - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

def toggle_favorite(user, dog):
    """
    ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ/ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ)
    
    Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: (favorite_obj or None, created: bool)
    - Ğ•ÑĞ»Ğ¸ created=True: ÑĞ¾Ğ±Ğ°ĞºĞ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ
    - Ğ•ÑĞ»Ğ¸ created=False: ÑĞ¾Ğ±Ğ°ĞºĞ° ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ° Ğ¸Ğ· Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾
    """
    favorite, created = Favorite.objects.get_or_create(user=user, dog=dog)
    if not created:
        favorite.delete()
        return None, False
    return favorite, True

def is_dog_favorited(user, dog):
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ° Ğ»Ğ¸ ÑĞ¾Ğ±Ğ°ĞºĞ° Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ"""
    return Favorite.objects.filter(user=user, dog=dog).exists()

def get_user_favorites(user):
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµÑ… Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ñ… ÑĞ¾Ğ±Ğ°Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""
    return Favorite.objects.filter(user=user).select_related('dog', 'dog__owner')

def can_user_favorite_dog(user, dog):
    """
    ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ
    ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾: Ğ½ĞµĞ»ÑŒĞ·Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ²Ğ¾Ñ ÑĞ¾Ğ±Ğ°ĞºÑƒ
    """
    return dog.owner != user

Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ• Ğ’ AJAX VIEW:

from services.favorites_service import toggle_favorite, can_user_favorite_dog

@login_required
@require_POST
def toggle_favorite_view(request, pk):
    dog = get_object_or_404(Dog, pk=pk)
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ²
    if not can_user_favorite_dog(request.user, dog):
        return JsonResponse({
            'error': 'ĞĞµĞ»ÑŒĞ·Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ²Ğ¾Ñ ÑĞ¾Ğ±Ğ°ĞºÑƒ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ'
        }, status=400)
    
    # ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾
    favorite, created = toggle_favorite(request.user, dog)
    
    return JsonResponse({
        'favorited': created,
        'message': 'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ' if created else 'Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¾ Ğ¸Ğ· Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾'
    })

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ğ¡Ğ•Ğ Ğ’Ğ˜Ğ¡: match_service.py - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¼Ğ°Ñ‚Ñ‡Ğ°Ğ¼Ğ¸
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

def create_match(dog_from, dog_to):
    """
    Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ²Ğ¾
    
    Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: (match, created)
    - created=True: Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¼Ğ°Ñ‚Ñ‡ ÑĞ¾Ğ·Ğ´Ğ°Ğ½
    - created=False: Ğ¼Ğ°Ñ‚Ñ‡ ÑƒĞ¶Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚
    """
    match, created = Match.objects.get_or_create(
        dog_from=dog_from,
        dog_to=dog_to,
        defaults={'status': 'pending'}
    )
    return match, created

def accept_match(match):
    """ĞŸÑ€Ğ¸Ğ½ÑÑ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ²Ğ¾"""
    match.status = 'accepted'
    match.save()
    return match

def decline_match(match):
    """ĞÑ‚ĞºĞ»Ğ¾Ğ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ²Ğ¾"""
    match.status = 'declined'
    match.save()
    return match

def get_user_matches(user):
    """
    ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ¼Ğ°Ñ‚Ñ‡Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ğµ)
    
    Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: {
        'sent': QuerySet Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ñ… Ğ¼Ğ°Ñ‚Ñ‡ĞµĞ¹,
        'received': QuerySet Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ñ… Ğ¼Ğ°Ñ‚Ñ‡ĞµĞ¹
    }
    """
    user_dogs = user.dogs.all()
    
    sent = Match.objects.filter(dog_from__in=user_dogs).select_related(
        'dog_from', 'dog_to', 'dog_to__owner'
    )
    
    received = Match.objects.filter(dog_to__in=user_dogs).select_related(
        'dog_from', 'dog_from__owner', 'dog_to'
    )
    
    return {
        'sent': sent,
        'received': received
    }

def can_user_respond_to_match(user, match):
    """
    ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ½Ğ° Ğ¼Ğ°Ñ‚Ñ‡
    ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°:
    - ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†ĞµĞ¼ dog_to
    - Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ 'pending'
    """
    return match.dog_to.owner == user and match.status == 'pending'

Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ• Ğ’ VIEWS:

from services.match_service import create_match, accept_match, can_user_respond_to_match

def send_match_request(request, pk):
    dog_to = get_object_or_404(Dog, pk=pk)
    dog_from = request.user.dogs.first()  # Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ ÑĞ¾Ğ±Ğ°ĞºÑƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    
    if not dog_from:
        messages.error(request, 'Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ ÑĞ²Ğ¾ĞµĞ¹ ÑĞ¾Ğ±Ğ°ĞºĞ¸')
        return redirect('dog_create')
    
    # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¼Ğ°Ñ‚Ñ‡Ğ° Ñ‡ĞµÑ€ĞµĞ· ÑĞµÑ€Ğ²Ğ¸Ñ
    match, created = create_match(dog_from, dog_to)
    
    if created:
        messages.success(request, 'Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° Ğ·Ğ½Ğ°ĞºĞ¾Ğ¼ÑÑ‚Ğ²Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½!')
    else:
        messages.info(request, 'Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ ÑƒĞ¶Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚')
    
    return redirect('dog_detail', pk=pk)

def accept_match_view(request, pk):
    match = get_object_or_404(Match, pk=pk)
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ñ‡ĞµÑ€ĞµĞ· ÑĞµÑ€Ğ²Ğ¸Ñ
    if not can_user_respond_to_match(request.user, match):
        return HttpResponseForbidden('Ğ£ Ğ²Ğ°Ñ Ğ½ĞµÑ‚ Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° Ğ¾Ñ‚Ğ²ĞµÑ‚')
    
    # ĞŸÑ€Ğ¸Ğ½ÑÑ‚Ğ¸Ğµ Ğ¼Ğ°Ñ‚Ñ‡Ğ° Ñ‡ĞµÑ€ĞµĞ· ÑĞµÑ€Ğ²Ğ¸Ñ
    accept_match(match)
    messages.success(request, 'Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚!')
    
    return redirect('matches')

================================================================================
6. ĞŸĞ Ğ•Ğ”Ğ¡Ğ¢ĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯ (VIEWS)
================================================================================

ĞŸÑ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ñ‹ Ğ½Ğ° Ğ´Ğ²Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ°:
- views.py: Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
- views_new.py: Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ

Ğ¢Ğ˜ĞŸĞ« ĞŸĞ Ğ•Ğ”Ğ¡Ğ¢ĞĞ’Ğ›Ğ•ĞĞ˜Ğ™:
1. Class-Based Views (CBV) - Ğ´Ğ»Ñ CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
2. Function-Based Views (FBV) - Ğ´Ğ»Ñ ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ğ¾Ğ¹ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 1: ListView - Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ² Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¸ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸ĞµĞ¹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

from django.views.generic import ListView

class DogListView(ListView):
    model = Dog
    template_name = 'dogs/dog_list.html'
    context_object_name = 'dogs'
    paginate_by = 12  # 12 ÑĞ¾Ğ±Ğ°Ğº Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ
    
    def get_queryset(self):
        queryset = super().get_queryset()
        
        # Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¿Ğ¾Ñ€Ğ¾Ğ´Ğµ
        breed = self.request.GET.get('breed')
        if breed:
            queryset = queryset.filter(breed__icontains=breed)
        
        # Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñƒ
        size = self.request.GET.get('size')
        if size:
            queryset = queryset.filter(size=size)
        
        # Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ¿Ğ¾Ğ»Ñƒ
        gender = self.request.GET.get('gender')
        if gender:
            queryset = queryset.filter(gender=gender)
        
        # ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
        return queryset.select_related('owner')
    
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        
        # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚
        context['current_breed'] = self.request.GET.get('breed', '')
        context['current_size'] = self.request.GET.get('size', '')
        context['current_gender'] = self.request.GET.get('gender', '')
        
        return context

URL: /dogs/?breed=Ğ»Ğ°Ğ±Ñ€Ğ°Ğ´Ğ¾Ñ€&size=large&page=2

Ğ’ Ğ¨ĞĞ‘Ğ›ĞĞĞ•:
{% for dog in dogs %}
    <div class="dog-card">{{ dog.name }}</div>
{% endfor %}

{% if page_obj.has_other_pages %}
    <div class="pagination">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">â† ĞĞ°Ğ·Ğ°Ğ´</a>
        {% endif %}
        <span>Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° {{ page_obj.number }} Ğ¸Ğ· {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Ğ’Ğ¿ĞµÑ€ĞµĞ´ â†’</a>
        {% endif %}
    </div>
{% endif %}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 2: DetailView - Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

from django.views.generic import DetailView

class DogDetailView(DetailView):
    model = Dog
    template_name = 'dogs/dog_detail.html'
    context_object_name = 'dog'
    
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        
        # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ± Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ¼
        if self.request.user.is_authenticated:
            context['is_favorited'] = is_dog_favorited(
                self.request.user, 
                self.object
            )
            
            # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
            context['can_edit'] = can_user_edit_dog(
                self.request.user, 
                self.object
            )
        
        return context

URL: /dogs/5/

Ğ’ Ğ¨ĞĞ‘Ğ›ĞĞĞ•:
<h1>{{ dog.name }}</h1>
<p>ĞŸĞ¾Ñ€Ğ¾Ğ´Ğ°: {{ dog.breed }}</p>
<p>Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚: {{ dog.age }} Ğ»ĞµÑ‚</p>

{% if can_edit %}
    <a href="{% url 'dog_edit' dog.pk %}">Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</a>
{% endif %}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 3: CreateView - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

from django.views.generic import CreateView
from django.contrib.auth.mixins import LoginRequiredMixin

class DogCreateView(LoginRequiredMixin, CreateView):
    model = Dog
    form_class = DogForm
    template_name = 'dogs/dog_form.html'
    success_url = reverse_lazy('dashboard')
    
    def form_valid(self, form):
        # ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†Ğ°
        form.instance.owner = self.request.user
        
        messages.success(self.request, 'Ğ¡Ğ¾Ğ±Ğ°ĞºĞ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ°!')
        return super().form_valid(form)
    
    def form_invalid(self, form):
        messages.error(self.request, 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¸ÑĞ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğµ')
        return super().form_invalid(form)

URL: /dogs/create/

ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡:
1. GET /dogs/create/ â†’ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿ÑƒÑÑ‚ÑƒÑ Ñ„Ğ¾Ñ€Ğ¼Ñƒ
2. POST /dogs/create/ â†’ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ
3. Ğ£ÑĞ¿ĞµÑ… â†’ Ñ€ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚ Ğ½Ğ° dashboard
4. ĞÑˆĞ¸Ğ±ĞºĞ° â†’ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ñƒ Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ğ¼Ğ¸

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 4: UpdateView - Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

from django.views.generic import UpdateView

class DogUpdateView(LoginRequiredMixin, UpdateView):
    model = Dog
    form_class = DogForm
    template_name = 'dogs/dog_form.html'
    
    def dispatch(self, request, *args, **kwargs):
        """ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ğ¿ĞµÑ€ĞµĞ´ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¾Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°"""
        dog = self.get_object()
        
        if not can_user_edit_dog(request.user, dog):
            messages.error(request, 'Ğ£ Ğ²Ğ°Ñ Ğ½ĞµÑ‚ Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ')
            return HttpResponseForbidden()
        
        return super().dispatch(request, *args, **kwargs)
    
    def form_valid(self, form):
        messages.success(self.request, 'Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹!')
        return super().form_valid(form)
    
    def get_success_url(self):
        return reverse('dog_detail', kwargs={'pk': self.object.pk})

URL: /dogs/5/edit/

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 5: DeleteView - Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

from django.views.generic import DeleteView

class DogDeleteView(LoginRequiredMixin, DeleteView):
    model = Dog
    template_name = 'dogs/dog_confirm_delete.html'
    success_url = reverse_lazy('dashboard')
    
    def dispatch(self, request, *args, **kwargs):
        dog = self.get_object()
        
        if not can_user_delete_dog(request.user, dog):
            return HttpResponseForbidden()
        
        return super().dispatch(request, *args, **kwargs)
    
    def delete(self, request, *args, **kwargs):
        messages.success(request, 'Ğ¡Ğ¾Ğ±Ğ°ĞºĞ° ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ°')
        return super().delete(request, *args, **kwargs)

URL: /dogs/5/delete/

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞŸĞĞ¢Ğ¢Ğ•Ğ Ğ 6: Function-Based View Ñ AJAX
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

from django.http import JsonResponse
from django.views.decorators.http import require_POST

@login_required
@require_POST
def toggle_favorite(request, pk):
    """AJAX endpoint Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾"""
    dog = get_object_or_404(Dog, pk=pk)
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ñ‡ĞµÑ€ĞµĞ· ÑĞµÑ€Ğ²Ğ¸Ñ
    if not can_user_favorite_dog(request.user, dog):
        return JsonResponse({
            'error': 'ĞĞµĞ»ÑŒĞ·Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ²Ğ¾Ñ ÑĞ¾Ğ±Ğ°ĞºÑƒ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ'
        }, status=400)
    
    # ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· ÑĞµÑ€Ğ²Ğ¸Ñ
    favorite, created = toggle_favorite(request.user, dog)
    
    return JsonResponse({
        'success': True,
        'favorited': created,
        'message': 'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ' if created else 'Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¾ Ğ¸Ğ· Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾'
    })

JAVASCRIPT ĞĞ ĞšĞ›Ğ˜Ğ•ĞĞ¢Ğ•:

document.querySelector('.favorite-btn').addEventListener('click', async (e) => {
    const dogId = e.target.dataset.dogId;
    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
    
    const response = await fetch(`/dogs/${dogId}/favorite/`, {
        method: 'POST',
        headers: {
            'X-CSRFToken': csrfToken,
            'Content-Type': 'application/json'
        }
    });
    
    const data = await response.json();
    
    if (data.success) {
        e.target.textContent = data.favorited ? 'â¤ï¸ Ğ’ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ¼' : 'ğŸ¤ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ';
    }
});

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DASHBOARD - ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

@login_required
def dashboard(request):
    """Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""
    
    # Ğ¡Ğ¾Ğ±Ğ°ĞºĞ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    user_dogs = get_user_dogs(request.user)
    
    # ĞœĞ°Ñ‚Ñ‡Ğ¸
    matches = get_user_matches(request.user)
    pending_received = matches['received'].filter(status='pending')
    
    # Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ
    favorites = get_user_favorites(request.user)[:5]  # ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ 5
    
    context = {
        'user_dogs': user_dogs,
        'pending_matches_count': pending_received.count(),
        'favorites': favorites,
    }
    
    return render(request, 'dogs/dashboard.html', context)

ĞĞ¢ĞĞ‘Ğ ĞĞ–ĞĞ•Ğ¢:
- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑĞ¾Ğ±Ğ°Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ÑÑ‰Ğ¸Ñ… Ğ¼Ğ°Ñ‚Ñ‡ĞµĞ¹
- ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ±Ğ°ĞºĞ¸
- Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ±Ğ°ĞºÑƒ, Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¼Ğ°Ñ‚Ñ‡Ğ¸)

================================================================================
7. Ğ¤ĞĞ ĞœĞ« Ğ˜ Ğ’ĞĞ›Ğ˜Ğ”ĞĞ¦Ğ˜Ğ¯
================================================================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ğ¤ĞĞ ĞœĞ: DogForm - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ/Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ğ°ĞºĞ¸
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ğ¤Ğ°Ğ¹Ğ»: dogs/forms.py

from django import forms
from dogs.models import Dog
from PIL import Image

class DogForm(forms.ModelForm):
    class Meta:
        model = Dog
        fields = ['name', 'breed', 'age', 'gender', 'size', 
                  'temperament', 'description', 'photo']
        
        widgets = {
            'name': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'Ğ˜Ğ¼Ñ ÑĞ¾Ğ±Ğ°ĞºĞ¸'
            }),
            'breed': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'ĞŸĞ¾Ñ€Ğ¾Ğ´Ğ°'
            }),
            'age': forms.NumberInput(attrs={
                'class': 'form-control',
                'min': 0,
                'max': 20
            }),
            'gender': forms.Select(attrs={'class': 'form-control'}),
            'size': forms.Select(attrs={'class': 'form-control'}),
            'temperament': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€ (Ğ´Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ñ‹Ğ¹, Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹...)'
            }),
            'description': forms.Textarea(attrs={
                'class': 'form-control',
                'rows': 4,
                'placeholder': 'Ğ Ğ°ÑÑĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ¾ Ğ²Ğ°ÑˆĞµĞ¹ ÑĞ¾Ğ±Ğ°ĞºĞµ...'
            }),
            'photo': forms.FileInput(attrs={'class': 'form-control'}),
        }
    
    def clean_age(self):
        """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚Ğ°"""
        age = self.cleaned_data.get('age')
        
        if age is not None and (age < 0 or age > 20):
            raise forms.ValidationError('Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ¾Ñ‚ 0 Ğ´Ğ¾ 20 Ğ»ĞµÑ‚')
        
        return age
    
    def clean_photo(self):
        """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ„Ğ¾Ñ‚Ğ¾"""
        photo = self.cleaned_data.get('photo')
        
        if not photo:
            return photo
        
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ° (Ğ¼Ğ°ĞºÑ 5 ĞœĞ‘)
        max_size = 5 * 1024 * 1024  # 5 MB
        if photo.size > max_size:
            raise forms.ValidationError(
                f'Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ½Ğµ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞ°Ñ‚ÑŒ 5 ĞœĞ‘. '
                f'Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€: {photo.size / 1024 / 1024:.1f} ĞœĞ‘'
            )
        
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ‚Ğ¸Ğ¿Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ°
        allowed_types = ['image/jpeg', 'image/png', 'image/webp']
        if photo.content_type not in allowed_types:
            raise forms.ValidationError(
                'Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹: JPEG, PNG, WebP'
            )
        
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ¾ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ
        try:
            img = Image.open(photo)
            img.verify()  # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ†ĞµĞ»Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸
        except Exception:
            raise forms.ValidationError(
                'Ğ¤Ğ°Ğ¹Ğ» Ğ¿Ğ¾Ğ²Ñ€ĞµĞ¶Ğ´ĞµĞ½ Ğ¸Ğ»Ğ¸ Ğ½Ğµ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ĞµĞ¼'
            )
        
        # Ğ¡Ğ±Ñ€Ğ¾Ñ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ñ Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ¿Ğ¾ÑĞ»Ğµ verify()
        photo.seek(0)
        
        return photo
    
    def clean(self):
        """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° ÑƒÑ€Ğ¾Ğ²Ğ½Ğµ Ñ„Ğ¾Ñ€Ğ¼Ñ‹"""
        cleaned_data = super().clean()
        
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ´Ğ»Ñ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†Ğ°
        name = cleaned_data.get('name')
        
        if name and hasattr(self.instance, 'owner') and self.instance.owner:
            # Ğ˜Ñ‰ĞµĞ¼ Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ ÑĞ¾Ğ±Ğ°ĞºĞ¸ Ñ Ñ‚Ğ°ĞºĞ¸Ğ¼ Ğ¶Ğµ Ğ¸Ğ¼ĞµĞ½ĞµĞ¼ Ñƒ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†Ğ°
            existing = Dog.objects.filter(
                owner=self.instance.owner,
                name=name
            ).exclude(pk=self.instance.pk)
            
            if existing.exists():
                raise forms.ValidationError(
                    f'Ğ£ Ğ²Ğ°Ñ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ ÑĞ¾Ğ±Ğ°ĞºĞ° Ñ Ğ¸Ğ¼ĞµĞ½ĞµĞ¼ "{name}". '
                    f'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´Ñ€ÑƒĞ³Ğ¾Ğµ Ğ¸Ğ¼Ñ.'
                )
        
        return cleaned_data

Ğ£Ğ ĞĞ’ĞĞ˜ Ğ’ĞĞ›Ğ˜Ğ”ĞĞ¦Ğ˜Ğ˜:

1. Ğ£Ğ ĞĞ’Ğ•ĞĞ¬ ĞŸĞĞ›Ğ¯ (clean_<fieldname>):
   - clean_age(): Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğ° 0-20
   - clean_photo(): Ñ€Ğ°Ğ·Ğ¼ĞµÑ€, Ñ‚Ğ¸Ğ¿, Ñ†ĞµĞ»Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ

2. Ğ£Ğ ĞĞ’Ğ•ĞĞ¬ Ğ¤ĞĞ ĞœĞ« (clean):
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ´Ğ»Ñ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†Ğ°
   - ĞœĞµĞ¶Ğ¿Ğ¾Ğ»ĞµĞ²Ğ°Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ

3. Ğ£Ğ ĞĞ’Ğ•ĞĞ¬ ĞœĞĞ”Ğ•Ğ›Ğ˜:
   - validators=[MinValueValidator(0), MaxValueValidator(20)]
   - UniqueConstraint Ğ½Ğ° (owner, name)

Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ• Ğ’ Ğ¨ĞĞ‘Ğ›ĞĞĞ•:

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    {% if form.non_field_errors %}
        <div class="alert alert-danger">
            {{ form.non_field_errors }}
        </div>
    {% endif %}
    
    {% for field in form %}
        <div class="form-group">
            <label>{{ field.label }}</label>
            {{ field }}
            
            {% if field.errors %}
                <div class="text-danger">
                    {{ field.errors }}
                </div>
            {% endif %}
        </div>
    {% endfor %}
    
    <button type="submit" class="btn btn-primary">Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ</button>
</form>

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ğ¤ĞĞ ĞœĞ: UserProfileForm - Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

class UserProfileForm(forms.ModelForm):
    class Meta:
        model = UserProfile
        fields = ['bio', 'location', 'avatar']
        
        widgets = {
            'bio': forms.Textarea(attrs={
                'class': 'form-control',
                'rows': 3,
                'placeholder': 'Ğ Ğ°ÑÑĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ¾ ÑĞµĞ±Ğµ...'
            }),
            'location': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'Ğ“Ğ¾Ñ€Ğ¾Ğ´'
            }),
            'avatar': forms.FileInput(attrs={'class': 'form-control'}),
        }
    
    def clean_avatar(self):
        """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°"""
        avatar = self.cleaned_data.get('avatar')
        
        if not avatar:
            return avatar
        
        # ĞœĞ°ĞºÑ 2 ĞœĞ‘ Ğ´Ğ»Ñ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ°
        if avatar.size > 2 * 1024 * 1024:
            raise forms.ValidationError('Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€Ğ° Ğ½Ğµ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞ°Ñ‚ÑŒ 2 ĞœĞ‘')
        
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ‚Ğ¸Ğ¿Ğ°
        if avatar.content_type not in ['image/jpeg', 'image/png']:
            raise forms.ValidationError('Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ JPEG Ğ¸ PNG')
        
        return avatar

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ğ¤ĞĞ ĞœĞ: CustomUserCreationForm - Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

from django.contrib.auth.forms import UserCreationForm
from django.contrib.auth.models import User

class CustomUserCreationForm(UserCreationForm):
    email = forms.EmailField(
        required=True,
        widget=forms.EmailInput(attrs={
            'class': 'form-control',
            'placeholder': 'Email'
        })
    )
    
    class Meta:
        model = User
        fields = ['username', 'email', 'password1', 'password2']
        widgets = {
            'username': forms.TextInput(attrs={
                'class': 'form-control',
                'placeholder': 'Ğ˜Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ'
            }),
        }
    
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ĞºĞ»Ğ°ÑÑÑ‹ Ğº Ğ¿Ğ¾Ğ»ÑĞ¼ Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¹
        self.fields['password1'].widget.attrs.update({'class': 'form-control'})
        self.fields['password2'].widget.attrs.update({'class': 'form-control'})
    
    def save(self, commit=True):
        user = super().save(commit=False)
        user.email = self.cleaned_data['email']
        
        if commit:
            user.save()
            # ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ
            UserProfile.objects.create(user=user)
        
        return user

ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡ Ğ Ğ•Ğ“Ğ˜Ğ¡Ğ¢Ğ ĞĞ¦Ğ˜Ğ˜:
1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ñƒ
2. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ (ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ username, ÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¹)
3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ User
4. ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ UserProfile
5. Ğ’Ñ…Ğ¾Ğ´ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ


================================================================================
8. Ğ¨ĞĞ‘Ğ›ĞĞĞ« Ğ˜ UI
================================================================================

Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ Ğ¨ĞĞ‘Ğ›ĞĞĞĞ’:

dogs/templates/dogs/
â”œâ”€â”€ base.html                 # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½
â”œâ”€â”€ landing.html              # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
â”œâ”€â”€ dashboard.html            # ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
â”œâ”€â”€ dog_list.html             # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑĞ¾Ğ±Ğ°Ğº
â”œâ”€â”€ dog_detail.html           # Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ÑĞ¾Ğ±Ğ°ĞºĞ¸
â”œâ”€â”€ dog_form.html             # Ğ¤Ğ¾Ñ€Ğ¼Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ/Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
â”œâ”€â”€ matches.html              # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¼Ğ°Ñ‚Ñ‡ĞµĞ¹
â”œâ”€â”€ favorites.html            # Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ
â”œâ”€â”€ profile.html              # ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
â”œâ”€â”€ login.html                # Ğ’Ñ…Ğ¾Ğ´
â”œâ”€â”€ register.html             # Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
â””â”€â”€ components/               # ĞŸĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
    â”œâ”€â”€ guest_menu.html       # ĞœĞµĞ½Ñ Ğ´Ğ»Ñ Ğ³Ğ¾ÑÑ‚ĞµĞ¹
    â””â”€â”€ messages.html         # Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ğ‘ĞĞ—ĞĞ’Ğ«Ğ™ Ğ¨ĞĞ‘Ğ›ĞĞ: base.html
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}DogDating{% endblock %}</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğµ ÑÑ‚Ğ¸Ğ»Ğ¸ -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="{% url 'landing' %}">ğŸ• DogDating</a>
            
            {% if user.is_authenticated %}
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'dashboard' %}">ĞŸĞ°Ğ½ĞµĞ»ÑŒ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'dog_list' %}">Ğ¡Ğ¾Ğ±Ğ°ĞºĞ¸</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'matches' %}">ĞœĞ°Ñ‚Ñ‡Ğ¸</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'favorites' %}">Ğ˜Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'logout' %}">Ğ’Ñ‹Ñ…Ğ¾Ğ´</a>
                    </li>
                </ul>
            {% else %}
                {% include 'dogs/components/guest_menu.html' %}
            {% endif %}
        </div>
    </nav>
    
    <!-- Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ -->
    {% include 'dogs/components/messages.html' %}
    
    <!-- ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ -->
    <main class="container my-4">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Ğ¤ÑƒÑ‚ĞµÑ€ -->
    <footer class="bg-light py-4 mt-5">
        <div class="container text-center">
            <p>&copy; 2025 DogDating. Ğ’ÑĞµ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ·Ğ°Ñ‰Ğ¸Ñ‰ĞµĞ½Ñ‹.</p>
        </div>
    </footer>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞšĞĞœĞŸĞĞĞ•ĞĞ¢: messages.html - Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

{% if messages %}
<div class="container mt-3">
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    {% endfor %}
</div>
{% endif %}

Ğ¢Ğ˜ĞŸĞ« Ğ¡ĞĞĞ‘Ğ©Ğ•ĞĞ˜Ğ™:
- success: Ğ·ĞµĞ»ĞµĞ½Ñ‹Ğ¹ (ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸)
- error: ĞºÑ€Ğ°ÑĞ½Ñ‹Ğ¹ (Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸)
- warning: Ğ¶ĞµĞ»Ñ‚Ñ‹Ğ¹ (Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ)
- info: ÑĞ¸Ğ½Ğ¸Ğ¹ (Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ)

Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ• Ğ’ VIEWS:
messages.success(request, 'Ğ¡Ğ¾Ğ±Ğ°ĞºĞ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ°!')
messages.error(request, 'ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ°')

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Ğ¨ĞĞ‘Ğ›ĞĞ: dog_list.html - Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑĞ¾Ğ±Ğ°Ğº
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

{% extends 'dogs/base.html' %}

{% block title %}Ğ’ÑĞµ ÑĞ¾Ğ±Ğ°ĞºĞ¸ - DogDating{% endblock %}

{% block content %}
<h1>Ğ’ÑĞµ ÑĞ¾Ğ±Ğ°ĞºĞ¸</h1>

<!-- Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ -->
<form method="get" class="row g-3 mb-4">
    <div class="col-md-4">
        <input type="text" name="breed" class="form-control" 
               placeholder="ĞŸĞ¾Ñ€Ğ¾Ğ´Ğ°" value="{{ current_breed }}">
    </div>
    <div class="col-md-3">
        <select name="size" class="form-select">
            <option value="">Ğ Ğ°Ğ·Ğ¼ĞµÑ€</option>
            <option value="small" {% if current_size == 'small' %}selected{% endif %}>ĞœĞ°Ğ»ĞµĞ½ÑŒĞºĞ°Ñ</option>
            <option value="medium" {% if current_size == 'medium' %}selected{% endif %}>Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ</option>
            <option value="large" {% if current_size == 'large' %}selected{% endif %}>Ğ‘Ğ¾Ğ»ÑŒÑˆĞ°Ñ</option>
        </select>
    </div>
    <div class="col-md-3">
        <select name="gender" class="form-select">
            <option value="">ĞŸĞ¾Ğ»</option>
            <option value="M" {% if current_gender == 'M' %}selected{% endif %}>ĞšĞ¾Ğ±ĞµĞ»ÑŒ</option>
            <option value="F" {% if current_gender == 'F' %}selected{% endif %}>Ğ¡ÑƒĞºĞ°</option>
        </select>
    </div>
    <div class="col-md-2">
        <button type="submit" class="btn btn-primary w-100">Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€</button>
    </div>
</form>

<!-- Ğ¡ĞµÑ‚ĞºĞ° ÑĞ¾Ğ±Ğ°Ğº -->
<div class="row">
    {% for dog in dogs %}
        <div class="col-md-4 mb-4">
            <div class="card">
                {% if dog.photo %}
                    <img src="{{ dog.photo.url }}" class="card-img-top" alt="{{ dog.name }}">
                {% else %}
                    <img src="{% static 'images/dog-placeholder.jpg' %}" class="card-img-top" alt="ĞĞµÑ‚ Ñ„Ğ¾Ñ‚Ğ¾">
                {% endif %}
                
                <div class="card-body">
                    <h5 class="card-title">{{ dog.name }}</h5>
                    <p class="card-text">
                        <strong>ĞŸĞ¾Ñ€Ğ¾Ğ´Ğ°:</strong> {{ dog.breed }}<br>
                        <strong>Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚:</strong> {{ dog.age }} Ğ»ĞµÑ‚<br>
                        <strong>Ğ Ğ°Ğ·Ğ¼ĞµÑ€:</strong> {{ dog.get_size_display }}
                    </p>
                    <a href="{% url 'dog_detail' dog.pk %}" class="btn btn-primary">ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ</a>
                </div>
            </div>
        </div>
    {% empty %}
        <div class="col-12">
            <p class="text-center">Ğ¡Ğ¾Ğ±Ğ°ĞºĞ¸ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ñ‹</p>
        </div>
    {% endfor %}
</div>

<!-- ĞŸĞ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ -->
{% if page_obj.has_other_pages %}
<nav>
    <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}">ĞĞ°Ğ·Ğ°Ğ´</a>
            </li>
        {% endif %}
        
        <li class="page-item disabled">
            <span class="page-link">
                Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° {{ page_obj.number }} Ğ¸Ğ· {{ page_obj.paginator.num_pages }}
            </span>
        </li>
        
        {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}">Ğ’Ğ¿ĞµÑ€ĞµĞ´</a>
            </li>
        {% endif %}
    </ul>
</nav>
{% endif %}
{% endblock %}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ĞĞ”ĞĞŸĞ¢Ğ˜Ğ’ĞĞ«Ğ™ Ğ”Ğ˜Ğ—ĞĞ™Ğ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

BREAKPOINTS (Bootstrap):
- xs: < 576px (Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ‹)
- sm: â‰¥ 576px (Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğµ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ‹)
- md: â‰¥ 768px (Ğ¿Ğ»Ğ°Ğ½ÑˆĞµÑ‚Ñ‹)
- lg: â‰¥ 992px (Ğ½Ğ¾ÑƒÑ‚Ğ±ÑƒĞºĞ¸)
- xl: â‰¥ 1200px (Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ñ‹)

ĞĞ”ĞĞŸĞ¢Ğ˜Ğ’ĞĞĞ¯ Ğ¡Ğ•Ğ¢ĞšĞ:
<div class="row">
    <div class="col-12 col-md-6 col-lg-4">
        <!-- ĞĞ° Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ…: 1 ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° (100%) -->
        <!-- ĞĞ° Ğ¿Ğ»Ğ°Ğ½ÑˆĞµÑ‚Ğ°Ñ…: 2 ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸ (50%) -->
        <!-- ĞĞ° Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğ°Ñ…: 3 ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸ (33%) -->
    </div>
</div>

ĞœĞĞ‘Ğ˜Ğ›Ğ¬ĞĞĞ¯ ĞĞŸĞ¢Ğ˜ĞœĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯:
- Viewport meta tag Ğ´Ğ»Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- Touch-friendly ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 48x48px)
- ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
- ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ (hamburger)

================================================================================
9. Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ ĞœĞ•ĞĞ®
================================================================================

ĞœĞĞ”Ğ•Ğ›Ğ˜ ĞœĞ•ĞĞ®:

Menu: ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ğ´Ğ»Ñ Ğ¿ÑƒĞ½ĞºÑ‚Ğ¾Ğ² Ğ¼ĞµĞ½Ñ
MenuItem: Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ÑƒĞ½ĞºÑ‚ Ğ¼ĞµĞ½Ñ Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ Ğ²Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸

Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ• ĞœĞ•ĞĞ® (management command):

python manage.py setup_menus

Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚:
- Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ (main-menu)
- ĞœĞµĞ½Ñ Ğ´Ğ»Ñ Ğ³Ğ¾ÑÑ‚ĞµĞ¹ (guest-menu)
- Ğ¤ÑƒÑ‚ĞµÑ€ Ğ¼ĞµĞ½Ñ (footer-menu)

TEMPLATE TAG Ğ”Ğ›Ğ¯ Ğ Ğ•ĞĞ”Ğ•Ğ Ğ˜ĞĞ“Ğ:

{% load menu_tags %}
{% render_menu 'main-menu' %}

ĞŸĞ Ğ˜ĞœĞ•Ğ  Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ¯:

<!-- Ğ’ base.html -->
<nav class="navbar">
    {% if user.is_authenticated %}
        {% render_menu 'main-menu' %}
    {% else %}
        {% render_menu 'guest-menu' %}
    {% endif %}
</nav>

================================================================================
10. Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•
================================================================================

Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ Ğ¢Ğ•Ğ¡Ğ¢ĞĞ’:

tests/
â”œâ”€â”€ test_db.py                          # Ğ¢ĞµÑÑ‚Ñ‹ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”œâ”€â”€ test_models.py                      # Ğ¢ĞµÑÑ‚Ñ‹ Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
â”œâ”€â”€ test_views.py                       # Ğ¢ĞµÑÑ‚Ñ‹ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
â””â”€â”€ test_validations_and_services.py    # Ğ¢ĞµÑÑ‚Ñ‹ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

Ğ—ĞĞŸĞ£Ğ¡Ğš Ğ¢Ğ•Ğ¡Ğ¢ĞĞ’:

# Ğ’ÑĞµ Ñ‚ĞµÑÑ‚Ñ‹
python manage.py test

# ĞšĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ»
python manage.py test tests.test_models

# ĞšĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ñ‚ĞµÑÑ‚
python manage.py test tests.test_models.DogModelTest.test_dog_creation

# Ğ¡ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğ¼ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¾Ğ¼
python manage.py test --verbosity=2

ĞŸĞ Ğ˜ĞœĞ•Ğ Ğ« Ğ¢Ğ•Ğ¡Ğ¢ĞĞ’:

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ğ¢Ğ•Ğ¡Ğ¢ ĞœĞĞ”Ğ•Ğ›Ğ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

from django.test import TestCase
from django.contrib.auth.models import User
from dogs.models import Dog

class DogModelTest(TestCase):
    def setUp(self):
        self.user = User.objects.create_user(
            username='testuser',
            password='testpass123'
        )
    
    def test_dog_creation(self):
        """Ğ¢ĞµÑÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ ÑĞ¾Ğ±Ğ°ĞºĞ¸"""
        dog = Dog.objects.create(
            owner=self.user,
            name='Ğ‘Ğ¾Ğ±Ğ¸Ğº',
            breed='Ğ›Ğ°Ğ±Ñ€Ğ°Ğ´Ğ¾Ñ€',
            age=3,
            gender='M',
            size='large',
            temperament='Ğ”Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ñ‹Ğ¹',
            description='Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¸Ğ¹ Ğ¼Ğ°Ğ»ÑŒÑ‡Ğ¸Ğº'
        )
        
        self.assertEqual(dog.name, 'Ğ‘Ğ¾Ğ±Ğ¸Ğº')
        self.assertEqual(dog.owner, self.user)
        self.assertEqual(str(dog), 'Ğ‘Ğ¾Ğ±Ğ¸Ğº (testuser)')
    
    def test_age_validation(self):
        """Ğ¢ĞµÑÑ‚ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚Ğ°"""
        from django.core.exceptions import ValidationError
        
        dog = Dog(
            owner=self.user,
            name='Ğ¢ĞµÑÑ‚',
            breed='Ğ¢ĞµÑÑ‚',
            age=25,  # ĞĞµĞ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğ¹ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚
            gender='M',
            size='medium',
            temperament='Ğ¢ĞµÑÑ‚',
            description='Ğ¢ĞµÑÑ‚'
        )
        
        with self.assertRaises(ValidationError):
            dog.full_clean()

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ğ¢Ğ•Ğ¡Ğ¢ ĞŸĞ Ğ•Ğ”Ğ¡Ğ¢ĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

from django.test import TestCase, Client
from django.urls import reverse

class DogViewsTest(TestCase):
    def setUp(self):
        self.client = Client()
        self.user = User.objects.create_user(
            username='testuser',
            password='testpass123'
        )
    
    def test_dog_list_view(self):
        """Ğ¢ĞµÑÑ‚ ÑĞ¿Ğ¸ÑĞºĞ° ÑĞ¾Ğ±Ğ°Ğº"""
        response = self.client.get(reverse('dog_list'))
        
        self.assertEqual(response.status_code, 200)
        self.assertTemplateUsed(response, 'dogs/dog_list.html')
    
    def test_dog_create_requires_login(self):
        """Ğ¢ĞµÑÑ‚: ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ğ°ĞºĞ¸ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸"""
        response = self.client.get(reverse('dog_create'))
        
        # Ğ”Ğ¾Ğ»Ğ¶ĞµĞ½ Ñ€ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¸Ñ‚ÑŒ Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ğ²Ñ…Ğ¾Ğ´Ğ°
        self.assertEqual(response.status_code, 302)
        self.assertIn('/login/', response.url)
    
    def test_dog_create_authenticated(self):
        """Ğ¢ĞµÑÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ ÑĞ¾Ğ±Ğ°ĞºĞ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼"""
        self.client.login(username='testuser', password='testpass123')
        
        response = self.client.post(reverse('dog_create'), {
            'name': 'Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ğ°Ñ ÑĞ¾Ğ±Ğ°ĞºĞ°',
            'breed': 'Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ğ°Ñ Ğ¿Ğ¾Ñ€Ğ¾Ğ´Ğ°',
            'age': 5,
            'gender': 'M',
            'size': 'medium',
            'temperament': 'Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹',
            'description': 'Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ'
        })
        
        # Ğ”Ğ¾Ğ»Ğ¶ĞµĞ½ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ±Ğ°ĞºÑƒ Ğ¸ Ñ€ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¸Ñ‚ÑŒ
        self.assertEqual(Dog.objects.count(), 1)
        self.assertEqual(response.status_code, 302)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ğ¢Ğ•Ğ¡Ğ¢ Ğ¡Ğ•Ğ Ğ’Ğ˜Ğ¡Ğ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

from services.favorites_service import toggle_favorite, can_user_favorite_dog

class FavoritesServiceTest(TestCase):
    def setUp(self):
        self.user1 = User.objects.create_user('user1', password='pass')
        self.user2 = User.objects.create_user('user2', password='pass')
        
        self.dog = Dog.objects.create(
            owner=self.user1,
            name='Ğ¢ĞµÑÑ‚',
            breed='Ğ¢ĞµÑÑ‚',
            age=3,
            gender='M',
            size='medium',
            temperament='Ğ¢ĞµÑÑ‚',
            description='Ğ¢ĞµÑÑ‚'
        )
    
    def test_toggle_favorite_add(self):
        """Ğ¢ĞµÑÑ‚ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ"""
        favorite, created = toggle_favorite(self.user2, self.dog)
        
        self.assertTrue(created)
        self.assertIsNotNone(favorite)
        self.assertEqual(Favorite.objects.count(), 1)
    
    def test_toggle_favorite_remove(self):
        """Ğ¢ĞµÑÑ‚ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ· Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾"""
        # Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼
        toggle_favorite(self.user2, self.dog)
        
        # ĞŸĞ¾Ñ‚Ğ¾Ğ¼ ÑƒĞ´Ğ°Ğ»ÑĞµĞ¼
        favorite, created = toggle_favorite(self.user2, self.dog)
        
        self.assertFalse(created)
        self.assertIsNone(favorite)
        self.assertEqual(Favorite.objects.count(), 0)
    
    def test_cannot_favorite_own_dog(self):
        """Ğ¢ĞµÑÑ‚: Ğ½ĞµĞ»ÑŒĞ·Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ²Ğ¾Ñ ÑĞ¾Ğ±Ğ°ĞºÑƒ Ğ² Ğ¸Ğ·Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ"""
        result = can_user_favorite_dog(self.user1, self.dog)
        
        self.assertFalse(result)

ĞŸĞĞšĞ Ğ«Ğ¢Ğ˜Ğ• Ğ¢Ğ•Ğ¡Ğ¢ĞĞœĞ˜:

Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ:
âœ“ ĞœĞ¾Ğ´ĞµĞ»Ğ¸ (Dog, Match, Favorite)
âœ“ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ (Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚, Ñ„Ğ¾Ñ‚Ğ¾, ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ)
âœ“ Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹ (dog_service, favorites_service, match_service)
âœ“ ĞŸÑ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ (CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸)
âœ“ ĞŸĞ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ

================================================================================
11. Ğ ĞĞ—Ğ’Ğ•Ğ Ğ¢Ğ«Ğ’ĞĞĞ˜Ğ• Ğ˜ DOCKER
================================================================================

DOCKER SETUP:

Ğ¤Ğ°Ğ¹Ğ»Ñ‹:
- Dockerfile: Ğ¾Ğ±Ñ€Ğ°Ğ· Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
- docker-compose.yml: Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ (web + db)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Dockerfile
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

FROM python:3.11-slim

WORKDIR /app

# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ°
COPY . .

# Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° ÑÑ‚Ğ°Ñ‚Ğ¸ĞºĞ¸
RUN python manage.py collectstatic --noinput

# ĞŸĞ¾Ñ€Ñ‚
EXPOSE 8000

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‡ĞµÑ€ĞµĞ· gunicorn
CMD ["gunicorn", "project.wsgi:application", "--bind", "0.0.0.0:8000"]

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
docker-compose.yml
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

version: '3.8'

services:
  db:
    image: postgres:16
    environment:
      POSTGRES_DB: dogdating
      POSTGRES_USER: dogdating_user
      POSTGRES_PASSWORD: dogdating_password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"
  
  web:
    build: .
    command: >
      sh -c "python manage.py migrate &&
             python manage.py collectstatic --noinput &&
             gunicorn project.wsgi:application --bind 0.0.0.0:8000"
    environment:
      - DJANGO_SETTINGS_MODULE=project.settings.production
      - DATABASE_URL=postgres://dogdating_user:dogdating_password@db:5432/dogdating
      - SECRET_KEY=your-production-secret-key
      - DEBUG=False
      - ALLOWED_HOSTS=localhost,127.0.0.1
    volumes:
      - .:/app
      - static_volume:/app/staticfiles
      - media_volume:/app/media
    ports:
      - "8000:8000"
    depends_on:
      - db

volumes:
  postgres_data:
  static_volume:
  media_volume:

ĞšĞĞœĞĞĞ”Ğ« DOCKER:

# Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞº
docker compose up --build

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ² Ñ„Ğ¾Ğ½Ğµ
docker compose up -d

# ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°
docker compose down

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ²
docker compose logs -f web

# Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğµ
docker compose exec web python manage.py createsuperuser
docker compose exec web python manage.py migrate

Ğ¡Ğ¢ĞĞ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ• Ğ¤ĞĞ™Ğ›Ğ« Ğ’ DOCKER:

WhiteNoise Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ñ€Ğ°Ğ·Ğ´Ğ°ĞµÑ‚ ÑÑ‚Ğ°Ñ‚Ğ¸ĞºÑƒ Ñ‡ĞµÑ€ĞµĞ· gunicorn:
- collectstatic Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°
- Ğ¤Ğ°Ğ¹Ğ»Ñ‹ ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ÑÑ‚ÑÑ Ğ² /app/staticfiles
- WhiteNoise middleware Ğ¾Ğ±ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğº /static/

ĞŸĞ ĞĞ”ĞĞšĞ¨Ğ Ğ§Ğ•ĞšĞ›Ğ˜Ğ¡Ğ¢:

â–¡ DEBUG = False
â–¡ Ğ¡Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ SECRET_KEY
â–¡ ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ ALLOWED_HOSTS
â–¡ DATABASE_URL Ğ´Ğ»Ñ PostgreSQL
â–¡ HTTPS Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ (SECURE_SSL_REDIRECT=True)
â–¡ CSRF_TRUSTED_ORIGINS Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½
â–¡ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ĞºĞ° ÑĞ¾Ğ±Ñ€Ğ°Ğ½Ğ° (collectstatic)
â–¡ ĞœĞµĞ´Ğ¸Ğ° Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ½Ğ° S3/MinIO (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
â–¡ Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¾
â–¡ Ğ‘ÑĞºĞ°Ğ¿Ñ‹ Ğ‘Ğ” Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹

================================================================================
12. Ğ ĞĞ‘ĞĞ§Ğ˜Ğ• ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡Ğ«
================================================================================

ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡ Ğ ĞĞ—Ğ ĞĞ‘ĞĞ¢ĞšĞ˜:

1. Ğ›ĞĞšĞĞ›Ğ¬ĞĞĞ¯ Ğ ĞĞ—Ğ ĞĞ‘ĞĞ¢ĞšĞ:
   python -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   python manage.py migrate
   python manage.py runserver

2. Ğ¡ĞĞ—Ğ”ĞĞĞ˜Ğ• Ğ¤Ğ˜Ğ§Ğ˜:
   - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ (ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾)
   - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ: python manage.py makemigrations
   - ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ: python manage.py migrate
   - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ñƒ
   - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
   - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½
   - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ URL
   - ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ñ‹
   - Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ñ‹: python manage.py test

3. Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•:
   python manage.py test
   python manage.py test --verbosity=2

4. Ğ”Ğ•ĞŸĞ›ĞĞ™:
   - ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ .env Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½Ğ°
   - docker compose up --build
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸: docker compose logs -f

Ğ¢Ğ˜ĞŸĞ˜Ğ§ĞĞ«Ğ• Ğ—ĞĞ”ĞĞ§Ğ˜:

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑÑƒĞ¿ĞµÑ€Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
python manage.py createsuperuser

# Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
python manage.py setup_menus
python manage.py populate_data

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
python manage.py makemigrations

# ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
python manage.py migrate

# Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ĞºÑƒ
python manage.py collectstatic

# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ shell
python manage.py shell

# Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ñ‹
python manage.py test

ĞĞ¢Ğ›ĞĞ”ĞšĞ:

# Django shell Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸
python manage.py shell

>>> from dogs.models import Dog
>>> Dog.objects.all()
>>> from services.favorites_service import toggle_favorite
>>> # Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ SQL Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
python manage.py shell

>>> from django.db import connection
>>> Dog.objects.all()
>>> print(connection.queries)

================================================================================
Ğ—ĞĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ•
================================================================================

Ğ­Ñ‚Ğ¾Ñ‚ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¾Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° DogDating.

ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ«Ğ• ĞšĞĞĞ¦Ğ•ĞŸĞ¦Ğ˜Ğ˜:
âœ“ Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº (base/development/production)
âœ“ Service Layer Ğ´Ğ»Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸
âœ“ Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ñ‚Ñ€ĞµÑ… ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ… (Ğ¿Ğ¾Ğ»Ğµ/Ñ„Ğ¾Ñ€Ğ¼Ğ°/Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ)
âœ“ Class-Based Views Ğ´Ğ»Ñ CRUD
âœ“ ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½
âœ“ Docker Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ
âœ“ ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

Ğ”ĞĞ›Ğ¬ĞĞ•Ğ™Ğ¨Ğ•Ğ• Ğ ĞĞ—Ğ’Ğ˜Ğ¢Ğ˜Ğ•:
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ API (Django REST Framework)
- Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‡Ğ°Ñ‚ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ³ĞµĞ¾Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ
- Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ S3 Ğ´Ğ»Ñ Ğ¼ĞµĞ´Ğ¸Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ (email/push)
- Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¾Ğ²

================================================================================
